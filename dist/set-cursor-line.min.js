/*! SetCursorLine - v0.0.1 - 2014-02-10
* https://github.com/grauwoelfchen/set-cursor-line
* Copyright (c) 2014 Yasuhiro Asaka; Licensed MIT */
!function(a){a.fn.setCursorLine=function(b){var c=a.extend({},a.fn.setCursorLine.options,b),d=function(b,d){var e=b[0],f=b.val().substr(0,e.selectionStart).split("\n").length,g=parseInt(b.css("line-height"),10);isNaN(g)&&(g=c.defaultLineHeight);var h=(f+d)*g,i=["-webkit","-webkit-linear","-moz-linear","-o-linear","-ms-linear","linear"],j="transparent "+(h-1)+"px, "+c.cursorLineColor+" "+h+"px, transparent 1px",k=a.map(i,function(a){return"background-image: "+a+"-gradient("+j+");"});b.attr("style",b.attr("style")+" "+k.join(" ")),b.css("background-repeat","no-repeat"),b.css("background-size","100% 100%, 100% 100%, 100% "+h+"px")},e={enter:13,"delete":8,backspace:46,up:38,down:40,left:37,right:39};return this.each(function(){var b=a(this),c=function(a){var c=b[0];return a=parseInt(a)||0,b.val().substr(0,c.selectionStart+a).split("\n")};b.keydown(function(a){switch(a.which){case e.enter:d(b,1);break;case e.down:var f=c(),g=b.val().split("\n");f.length!=g.length&&d(b,1);break;case e.right:var h=1,f=c(h);""==f[f.length-1]&&d(b,1);break;case e.delete:case e.backspace:case e.left:var f=c();""==f[f.length-1]&&1!=f.length&&d(b,-1);break;case e.up:var f=c();1!=f.length&&d(b,-1)}}),b.click(function(){d(b,0)}),b.blur(function(){var b=a(this);b.css("background-image","none")})})},a.fn.setCursorLine.options={defaultLineHeight:16,cursorLineColor:"black"}}(jQuery);